{"version":3,"file":"bundle.js","sources":["../../src/GameConfig.ts","../../src/script/common/CustomTerrainMaterial.ts","../../src/script/customMaterial/terrainShader.fs","../../src/script/customMaterial/terrainShader.vs","../../src/script/customMaterial/customShader.ts","../../src/script/customMaterial/createMyMaterial.ts","../../src/ui/mainLayer.ts","../../src/script/GameManager.ts","../../src/ui/joy.ts","../../src/script/RoleMoveScript.ts","../../src/script/common/CameraFollowScript.ts","../../src/GlobalConfig.ts","../../src/script/SceneManager.ts","../../src/script/GameScene.ts","../../src/Main.ts"],"sourcesContent":["/**This class is automatically generated by LayaAirIDE, please do not make any modifications. */\r\nimport GameUI from \"./script/GameUI\"\r\n/*\r\n* 游戏初始化配置;\r\n*/\r\nexport default class GameConfig{\r\n    static width:number=640;\r\n    static height:number=1136;\r\n\r\n    // 相关取值在 laya.core.js\r\n    static scaleMode: string = Laya.Stage.SCALE_FULL;\r\n    static screenMode: string = Laya.Stage.SCREEN_NONE;\r\n    static alignV:string=\"top\";\r\n    static alignH:string=\"left\";\r\n    static startScene:any=\"scene/GameScene.scene\";\r\n    static sceneRoot:string=\"\";\r\n    static debug:boolean=false;\r\n    static stat:boolean=false;\r\n    static physicsDebug:boolean=false;\r\n    static exportSceneToJson:boolean=true;\r\n\r\n\r\n\r\n    constructor(){}\r\n    // static init(){\r\n        // var reg: Function = Laya.ClassUtils.regClass;\r\n        // reg(\"script/GameUI.ts\",GameUI);\r\n    // }\r\n}\r\n// GameConfig.init();\r\n","import Vector2 = Laya.Vector2;\nimport Material = Laya.BaseMaterial;\nimport Shader3D = Laya.Shader3D;\nimport BaseTexture = Laya.BaseTexture;\nimport ShaderDefine = Laya.ShaderDefine;\n\n/**\n * ...\n * @author\n */\nexport default class CustomTerrainMaterial extends Material {\n\tstatic SPLATALPHATEXTURE: number = Shader3D.propertyNameToID(\"u_SplatAlphaTexture\");\n\tstatic DIFFUSETEXTURE1: number = Shader3D.propertyNameToID(\"u_DiffuseTexture1\");\n\tstatic DIFFUSETEXTURE2: number = Shader3D.propertyNameToID(\"u_DiffuseTexture2\");\n\tstatic DIFFUSETEXTURE3: number = Shader3D.propertyNameToID(\"u_DiffuseTexture3\");\n\tstatic DIFFUSETEXTURE4: number = Shader3D.propertyNameToID(\"u_DiffuseTexture4\");\n\tstatic DIFFUSETEXTURE5: number = Shader3D.propertyNameToID(\"u_DiffuseTexture5\");\n\tstatic DIFFUSESCALE1: number = Shader3D.propertyNameToID(\"u_DiffuseScale1\");\n\tstatic DIFFUSESCALE2: number = Shader3D.propertyNameToID(\"u_DiffuseScale2\");\n\tstatic DIFFUSESCALE3: number = Shader3D.propertyNameToID(\"u_DiffuseScale3\");\n\tstatic DIFFUSESCALE4: number = Shader3D.propertyNameToID(\"u_DiffuseScale4\");\n\tstatic DIFFUSESCALE5: number = Shader3D.propertyNameToID(\"u_DiffuseScale5\");\n\n\t/**自定义地形材质细节宏定义。*/\n\tstatic SHADERDEFINE_DETAIL_NUM1: ShaderDefine;\n\tstatic SHADERDEFINE_DETAIL_NUM2: ShaderDefine;\n\tstatic SHADERDEFINE_DETAIL_NUM3: ShaderDefine;\n\tstatic SHADERDEFINE_DETAIL_NUM4: ShaderDefine;\n\tstatic SHADERDEFINE_DETAIL_NUM5: ShaderDefine;\n\n\t/**\n\t * @private\n\t */\n\tstatic __init__(): void {\n\t\tCustomTerrainMaterial.SHADERDEFINE_DETAIL_NUM1 = Shader3D.getDefineByName(\"CUSTOM_DETAIL_NUM1\");\n\t\tCustomTerrainMaterial.SHADERDEFINE_DETAIL_NUM2 = Shader3D.getDefineByName(\"CUSTOM_DETAIL_NUM2\");\n\t\tCustomTerrainMaterial.SHADERDEFINE_DETAIL_NUM3 = Shader3D.getDefineByName(\"CUSTOM_DETAIL_NUM3\");\n\t\tCustomTerrainMaterial.SHADERDEFINE_DETAIL_NUM4 = Shader3D.getDefineByName(\"CUSTOM_DETAIL_NUM4\");\n\t\tCustomTerrainMaterial.SHADERDEFINE_DETAIL_NUM5 = Shader3D.getDefineByName(\"CUSTOM_DETAIL_NUM5\");\n\t}\n\n\t/**\n\t * 获取splatAlpha贴图。\n\t * @return splatAlpha贴图。\n\t */\n\tget splatAlphaTexture(): BaseTexture {\n\t\treturn this._shaderValues.getTexture(CustomTerrainMaterial.SPLATALPHATEXTURE);\n\t}\n\n\t/**\n\t * 设置splatAlpha贴图。\n\t * @param value splatAlpha贴图。\n\t */\n\tset splatAlphaTexture(value: BaseTexture) {\n\t\tthis._shaderValues.setTexture(CustomTerrainMaterial.SPLATALPHATEXTURE, value);\n\t}\n\n\t/**\n\t * 获取第一层贴图。\n\t * @return 第一层贴图。\n\t */\n\tget diffuseTexture1(): BaseTexture {\n\t\treturn this._shaderValues.getTexture(CustomTerrainMaterial.DIFFUSETEXTURE1);\n\t}\n\n\t/**\n\t * 设置第一层贴图。\n\t * @param value 第一层贴图。\n\t */\n\tset diffuseTexture1(value: BaseTexture) {\n\t\tthis._shaderValues.setTexture(CustomTerrainMaterial.DIFFUSETEXTURE1, value);\n\t\tthis._setDetailNum(1);\n\t}\n\n\t/**\n\t * 获取第二层贴图。\n\t * @return 第二层贴图。\n\t */\n\tget diffuseTexture2(): BaseTexture {\n\t\treturn this._shaderValues.getTexture(CustomTerrainMaterial.DIFFUSETEXTURE2);\n\t}\n\n\t/**\n\t * 设置第二层贴图。\n\t * @param value 第二层贴图。\n\t */\n\tset diffuseTexture2(value: BaseTexture) {\n\t\tthis._shaderValues.setTexture(CustomTerrainMaterial.DIFFUSETEXTURE2, value);\n\t\tthis._setDetailNum(2);\n\t}\n\n\t/**\n\t * 获取第三层贴图。\n\t * @return 第三层贴图。\n\t */\n\tget diffuseTexture3(): BaseTexture {\n\t\treturn this._shaderValues.getTexture(CustomTerrainMaterial.DIFFUSETEXTURE3);\n\t}\n\n\t/**\n\t * 设置第三层贴图。\n\t * @param value 第三层贴图。\n\t */\n\tset diffuseTexture3(value: BaseTexture) {\n\t\tthis._shaderValues.setTexture(CustomTerrainMaterial.DIFFUSETEXTURE3, value);\n\t\tthis._setDetailNum(3);\n\t}\n\n\t/**\n\t * 获取第四层贴图。\n\t * @return 第四层贴图。\n\t */\n\tget diffuseTexture4(): BaseTexture {\n\t\treturn this._shaderValues.getTexture(CustomTerrainMaterial.DIFFUSETEXTURE4);\n\t}\n\n\t/**\n\t * 设置第四层贴图。\n\t * @param value 第四层贴图。\n\t */\n\tset diffuseTexture4(value: BaseTexture) {\n\t\tthis._shaderValues.setTexture(CustomTerrainMaterial.DIFFUSETEXTURE4, value);\n\t\tthis._setDetailNum(4);\n\t}\n\n\t/**\n\t * 获取第五层贴图。\n\t * @return 第五层贴图。\n\t */\n\tget diffuseTexture5(): BaseTexture {\n\t\treturn this._shaderValues.getTexture(CustomTerrainMaterial.DIFFUSETEXTURE5);\n\t}\n\n\t/**\n\t * 设置第五层贴图。\n\t * @param value 第五层贴图。\n\t */\n\tset diffuseTexture5(value: BaseTexture) {\n\t\tthis._shaderValues.setTexture(CustomTerrainMaterial.DIFFUSETEXTURE5, value);\n\t\tthis._setDetailNum(5);\n\t}\n\n\tsetDiffuseScale1(scale1: Vector2): void {\n\t\tthis._shaderValues.setVector2(CustomTerrainMaterial.DIFFUSESCALE1, scale1);\n\t}\n\n\tsetDiffuseScale2(scale2: Vector2): void {\n\t\tthis._shaderValues.setVector2(CustomTerrainMaterial.DIFFUSESCALE2, scale2);\n\t}\n\n\tsetDiffuseScale3(scale3: Vector2): void {\n\t\tthis._shaderValues.setVector2(CustomTerrainMaterial.DIFFUSESCALE3, scale3);\n\t}\n\n\tsetDiffuseScale4(scale4: Vector2): void {\n\t\tthis._shaderValues.setVector2(CustomTerrainMaterial.DIFFUSESCALE4, scale4);\n\t}\n\n\tsetDiffuseScale5(scale5: Vector2): void {\n\t\tthis._shaderValues.setVector2(CustomTerrainMaterial.DIFFUSESCALE5, scale5);\n\t}\n\n\tprivate _setDetailNum(value: number): void {\n\t\tswitch (value) {\n\t\t\tcase 1:\n\t\t\t\tthis._shaderValues.addDefine(CustomTerrainMaterial.SHADERDEFINE_DETAIL_NUM1);\n\t\t\t\tthis._shaderValues.removeDefine(CustomTerrainMaterial.SHADERDEFINE_DETAIL_NUM2);\n\t\t\t\tthis._shaderValues.removeDefine(CustomTerrainMaterial.SHADERDEFINE_DETAIL_NUM3);\n\t\t\t\tthis._shaderValues.removeDefine(CustomTerrainMaterial.SHADERDEFINE_DETAIL_NUM4);\n\t\t\t\tthis._shaderValues.removeDefine(CustomTerrainMaterial.SHADERDEFINE_DETAIL_NUM5);\n\t\t\t\tbreak;\n\t\t\tcase 2:\n\t\t\t\tthis._shaderValues.addDefine(CustomTerrainMaterial.SHADERDEFINE_DETAIL_NUM2);\n\t\t\t\tthis._shaderValues.removeDefine(CustomTerrainMaterial.SHADERDEFINE_DETAIL_NUM1);\n\t\t\t\tthis._shaderValues.removeDefine(CustomTerrainMaterial.SHADERDEFINE_DETAIL_NUM3);\n\t\t\t\tthis._shaderValues.removeDefine(CustomTerrainMaterial.SHADERDEFINE_DETAIL_NUM4);\n\t\t\t\tthis._shaderValues.removeDefine(CustomTerrainMaterial.SHADERDEFINE_DETAIL_NUM5);\n\t\t\t\tbreak;\n\t\t\tcase 3:\n\t\t\t\tthis._shaderValues.addDefine(CustomTerrainMaterial.SHADERDEFINE_DETAIL_NUM3);\n\t\t\t\tthis._shaderValues.removeDefine(CustomTerrainMaterial.SHADERDEFINE_DETAIL_NUM1);\n\t\t\t\tthis._shaderValues.removeDefine(CustomTerrainMaterial.SHADERDEFINE_DETAIL_NUM2);\n\t\t\t\tthis._shaderValues.removeDefine(CustomTerrainMaterial.SHADERDEFINE_DETAIL_NUM4);\n\t\t\t\tthis._shaderValues.removeDefine(CustomTerrainMaterial.SHADERDEFINE_DETAIL_NUM5);\n\t\t\t\tbreak;\n\t\t\tcase 4:\n\t\t\t\tthis._shaderValues.addDefine(CustomTerrainMaterial.SHADERDEFINE_DETAIL_NUM4);\n\t\t\t\tthis._shaderValues.removeDefine(CustomTerrainMaterial.SHADERDEFINE_DETAIL_NUM1);\n\t\t\t\tthis._shaderValues.removeDefine(CustomTerrainMaterial.SHADERDEFINE_DETAIL_NUM2);\n\t\t\t\tthis._shaderValues.removeDefine(CustomTerrainMaterial.SHADERDEFINE_DETAIL_NUM3);\n\t\t\t\tthis._shaderValues.removeDefine(CustomTerrainMaterial.SHADERDEFINE_DETAIL_NUM5);\n\t\t\t\tbreak;\n\t\t\tcase 5:\n\t\t\t\tthis._shaderValues.addDefine(CustomTerrainMaterial.SHADERDEFINE_DETAIL_NUM5);\n\t\t\t\tthis._shaderValues.removeDefine(CustomTerrainMaterial.SHADERDEFINE_DETAIL_NUM1);\n\t\t\t\tthis._shaderValues.removeDefine(CustomTerrainMaterial.SHADERDEFINE_DETAIL_NUM2);\n\t\t\t\tthis._shaderValues.removeDefine(CustomTerrainMaterial.SHADERDEFINE_DETAIL_NUM3);\n\t\t\t\tthis._shaderValues.removeDefine(CustomTerrainMaterial.SHADERDEFINE_DETAIL_NUM4);\n\t\t\t\tbreak;\n\t\t}\n\t}\n\n\tconstructor() {\n\t\tsuper();\n\t\t\n\t\tthis.setShaderName(\"CustomTerrainShader\");\n\t}\n\n\n\n}\n","#ifdef GL_FRAGMENT_PRECISION_HIGH\nprecision highp float;\n#else\nprecision mediump float;\n#endif\n\nuniform sampler2D u_SplatAlphaTexture;\n\nuniform sampler2D u_DiffuseTexture1;\nuniform sampler2D u_DiffuseTexture2;\nuniform sampler2D u_DiffuseTexture3;\nuniform sampler2D u_DiffuseTexture4;\nuniform sampler2D u_DiffuseTexture5;\n\nuniform vec2 u_DiffuseScale1;\nuniform vec2 u_DiffuseScale2;\nuniform vec2 u_DiffuseScale3;\nuniform vec2 u_DiffuseScale4;\nuniform vec2 u_DiffuseScale5;\n\nvarying vec2 v_Texcoord0;\n\nvoid main()\n{\n\t#ifdef CUSTOM_DETAIL_NUM1\n\t\tvec4 splatAlpha = texture2D(u_SplatAlphaTexture, v_Texcoord0);\n\t\tvec4 color1 = texture2D(u_DiffuseTexture1, v_Texcoord0 * u_DiffuseScale1);\n\t\tgl_FragColor.xyz = color1.xyz * splatAlpha.r;\n\t#elif defined(CUSTOM_DETAIL_NUM2)\n\t\tvec4 splatAlpha = texture2D(u_SplatAlphaTexture, v_Texcoord0);\n\t\tvec4 color1 = texture2D(u_DiffuseTexture1, v_Texcoord0 * u_DiffuseScale1);\n\t\tvec4 color2 = texture2D(u_DiffuseTexture2, v_Texcoord0 * u_DiffuseScale2);\n\t\tgl_FragColor.xyz = color1.xyz * splatAlpha.r + color2.xyz * (1.0 - splatAlpha.r);\n\t#elif defined(CUSTOM_DETAIL_NUM3)\n\t\tvec4 splatAlpha = texture2D(u_SplatAlphaTexture, v_Texcoord0);\n\t\tvec4 color1 = texture2D(u_DiffuseTexture1, v_Texcoord0 * u_DiffuseScale1);\n\t\tvec4 color2 = texture2D(u_DiffuseTexture2, v_Texcoord0 * u_DiffuseScale2);\n\t\tvec4 color3 = texture2D(u_DiffuseTexture3, v_Texcoord0 * u_DiffuseScale3);\n\t\tgl_FragColor.xyz = color1.xyz * splatAlpha.r  + color2.xyz * splatAlpha.g + color3.xyz * (1.0 - splatAlpha.r - splatAlpha.g);\n\t#elif defined(CUSTOM_DETAIL_NUM4)\n\t\tvec4 splatAlpha = texture2D(u_SplatAlphaTexture, v_Texcoord0);\n\t\tvec4 color1 = texture2D(u_DiffuseTexture1, v_Texcoord0 * u_DiffuseScale1);\n\t\tvec4 color2 = texture2D(u_DiffuseTexture2, v_Texcoord0 * u_DiffuseScale2);\n\t\tvec4 color3 = texture2D(u_DiffuseTexture3, v_Texcoord0 * u_DiffuseScale3);\n\t\tvec4 color4 = texture2D(u_DiffuseTexture4, v_Texcoord0 * u_DiffuseScale4);\n\t\tgl_FragColor.xyz = color1.xyz * splatAlpha.r  + color2.xyz * splatAlpha.g + color3.xyz * splatAlpha.b + color4.xyz * (1.0 - splatAlpha.r - splatAlpha.g - splatAlpha.b);\n\t#elif defined(CUSTOM_DETAIL_NUM5)\n\t\tvec4 splatAlpha = texture2D(u_SplatAlphaTexture, v_Texcoord0);\n\t\tvec4 color1 = texture2D(u_DiffuseTexture1, v_Texcoord0 * u_DiffuseScale1);\n\t\tvec4 color2 = texture2D(u_DiffuseTexture2, v_Texcoord0 * u_DiffuseScale2);\n\t\tvec4 color3 = texture2D(u_DiffuseTexture3, v_Texcoord0 * u_DiffuseScale3);\n\t\tvec4 color4 = texture2D(u_DiffuseTexture4, v_Texcoord0 * u_DiffuseScale4);\n\t\tvec4 color5 = texture2D(u_DiffuseTexture5, v_Texcoord0 * u_DiffuseScale5);\n\t\tgl_FragColor.xyz = color1.xyz * splatAlpha.r  + color2.xyz * splatAlpha.g + color3.xyz * splatAlpha.b + color4.xyz * splatAlpha.a + color5.xyz * (1.0 - splatAlpha.r - splatAlpha.g - splatAlpha.b - splatAlpha.a);\n\t#else\n\t\t//gl_FragColor.xyz = vec3(0.0, 1.0, 0.0);\n\t#endif\n}\n\n\n\n","#include \"Lighting.glsl\";\nattribute vec4 a_Position;\nattribute vec2 a_Texcoord0;\nattribute vec3 a_Normal;\n\nuniform mat4 u_MvpMatrix;\nvarying vec2 v_Texcoord0;\n\nvoid main()\n{\n  gl_Position = u_MvpMatrix * a_Position;\n  v_Texcoord0 = a_Texcoord0;\n gl_Position=remapGLPositionZ(gl_Position);\n}","import CustomTerrainMaterial from \"../common/CustomTerrainMaterial\"\nimport TerrainShaderFS from \"./terrainShader.fs\";\nimport TerrainShaderVS from \"./terrainShader.vs\";\nimport VertexMesh = Laya.VertexMesh;\nimport SubShader = Laya.SubShader;\nimport Shader3D = Laya.Shader3D;\n\nexport { customTerrianShader }\n\nfunction customTerrianShader() {\n\n    CustomTerrainMaterial.__init__();\n    var attributeMap: any = {\n        'a_Position': VertexMesh.MESH_POSITION0,\n        'a_Normal': VertexMesh.MESH_NORMAL0,\n        'a_Texcoord0': VertexMesh.MESH_TEXTURECOORDINATE0\n    };\n    var uniformMap: any = {\n        'u_MvpMatrix': Shader3D.PERIOD_SPRITE,\n        'u_WorldMat': Shader3D.PERIOD_SPRITE,\n        'u_CameraPos': Shader3D.PERIOD_CAMERA,\n        'u_SplatAlphaTexture': Shader3D.PERIOD_MATERIAL,\n        'u_DiffuseTexture1': Shader3D.PERIOD_MATERIAL,\n        'u_DiffuseTexture2': Shader3D.PERIOD_MATERIAL,\n        'u_DiffuseTexture3': Shader3D.PERIOD_MATERIAL,\n        'u_DiffuseTexture4': Shader3D.PERIOD_MATERIAL,\n        'u_DiffuseTexture5': Shader3D.PERIOD_MATERIAL,\n        'u_DiffuseScale1': Shader3D.PERIOD_MATERIAL,\n        'u_DiffuseScale2': Shader3D.PERIOD_MATERIAL,\n        'u_DiffuseScale3': Shader3D.PERIOD_MATERIAL,\n        'u_DiffuseScale4': Shader3D.PERIOD_MATERIAL,\n        'u_DiffuseScale5': Shader3D.PERIOD_MATERIAL\n    };\n\n    var customTerrianShader: Shader3D = Shader3D.add(\"CustomTerrainShader\");\n    var subShader: SubShader = new SubShader(\n        attributeMap,\n        uniformMap\n    );\n    customTerrianShader.addSubShader(subShader);\n    subShader.addShaderPass(\n        TerrainShaderVS,\n        TerrainShaderFS\n    );\n}","import CustomTerrainMaterial from \"../common/CustomTerrainMaterial\"\nimport Texture2D = Laya.Texture2D;\nimport Vector2 = Laya.Vector2;\n\n\nexport { createTerrainMaterial }\nfunction createTerrainMaterial(): CustomTerrainMaterial {\n    var customMaterial: CustomTerrainMaterial = new CustomTerrainMaterial();\n    Texture2D.load(\"res/LayaScene_DesertScene_mobile/Conventional/terrain/splatalpha 0.png\", Laya.Handler.create(this, function (tex: Texture2D): void {\n        customMaterial.splatAlphaTexture = tex;\n    }));\n    Texture2D.load(\"res/LayaScene_DesertScene_mobile/Conventional/terrain/Ground1.png\", Laya.Handler.create(this, function (tex: Texture2D): void {\n        customMaterial.diffuseTexture1 = tex;\n    }));\n\n    Texture2D.load(\"res/LayaScene_DesertScene_mobile/Conventional/terrain/Ground2.png\", Laya.Handler.create(this, function (tex: Texture2D): void {\n        customMaterial.diffuseTexture2 = tex;\n    }));\n\n    Texture2D.load(\"res/LayaScene_DesertScene_mobile/Conventional/terrain/Ground3.png\", Laya.Handler.create(this, function (tex: Texture2D): void {\n        customMaterial.diffuseTexture3 = tex;\n    }));\n\n    Texture2D.load(\"res/LayaScene_DesertScene_mobile/Conventional/terrain/Ground1.png\", Laya.Handler.create(this, function (tex: Texture2D): void {\n        customMaterial.diffuseTexture4 = tex;\n    }))\n    customMaterial.setDiffuseScale1(new Vector2(27.92727, 27.92727));\n    customMaterial.setDiffuseScale2(new Vector2(13.96364, 13.96364));\n    customMaterial.setDiffuseScale3(new Vector2(18.61818, 18.61818));\n    customMaterial.setDiffuseScale4(new Vector2(13.96364, 13.96364));\n    return customMaterial\n}\n","export default class MainLayer extends Laya.Sprite {\n    /**地图场景层*/\n    public sceneLayer: Laya.Sprite;\n    /**主界面*/\n    public mainLayer: Laya.Sprite;\n    /**通用显示层*/\n    public commonLayer: Laya.Sprite;\n    /**弹出层*/\n    public popLayer: Laya.Sprite;\n    /**消息层*/\n    public messageLayer: Laya.Sprite;\n    /**剧情层*/\n    public storyLayer: Laya.Sprite;\n    /**tip 弹出层 */\n    public tipLayer: Laya.Sprite;\n    /**GM工具层 */\n    public gmLayer: Laya.Sprite;\n    /**顶级弹出层 */\n    public topLayer: Laya.Sprite;\n\n    /**恶意ip提示container */\n    public eyiIpLayer: Laya.Sprite;\n\n    public container: Laya.Sprite;\n    constructor() {\n        super();\n        this.init();\n    }\n\n    public initContainer($container: Laya.Sprite): void {\n        this.container = $container;\n        this.container.addChild(this.sceneLayer);\n        this.container.addChild(this.mainLayer);\n        this.container.addChild(this.commonLayer);\n        this.container.addChild(this.popLayer);\n        this.container.addChild(this.messageLayer);\n        this.container.addChild(this.storyLayer);\n        this.container.addChild(this.tipLayer);\n        this.container.addChild(this.gmLayer);\n        this.container.addChild(this.topLayer);\n        this.container.addChild(this.eyiIpLayer);\n    }\n\n    private init(): void {\n        this.sceneLayer = new Laya.Sprite();\n        this.sceneLayer.mouseEnabled = false;\n        this.sceneLayer.mouseThrough = false;\n        this.mainLayer = new Laya.Sprite();\n        this.mainLayer.mouseEnabled = false;\n        this.mainLayer.mouseThrough = false;\n        this.commonLayer = new Laya.Sprite();\n        this.commonLayer.mouseEnabled = false;\n        this.commonLayer.mouseThrough = false;\n        this.popLayer = new Laya.Sprite();\n        this.popLayer.mouseEnabled = false;\n        this.popLayer.mouseThrough = false;\n        this.messageLayer = new Laya.Sprite();\n        this.messageLayer.mouseEnabled = false;\n        this.messageLayer.mouseThrough = false;\n        this.storyLayer = new Laya.Sprite();\n        this.storyLayer.mouseEnabled = false;\n        this.storyLayer.mouseThrough = false;\n        this.tipLayer = new Laya.Sprite();\n        this.tipLayer.mouseEnabled = false;\n        this.tipLayer.mouseThrough = false;\n        this.gmLayer = new Laya.Sprite();\n        this.gmLayer.mouseEnabled = false;\n        this.gmLayer.mouseThrough = false;\n        this.topLayer = new Laya.Sprite;\n        this.topLayer.mouseEnabled = false;\n        this.topLayer.mouseThrough = false;\n        this.eyiIpLayer = new Laya.Sprite;\n        this.eyiIpLayer.mouseEnabled = false;\n        this.eyiIpLayer.mouseThrough = false;\n    }\n\n    // public getLayerByUIType(type: UIType): Laya.Sprite {\n    //     if (type >= 0 && type < 100) {\n    //         return this.sceneLayer;\n    //     } else if (type >= 100 && type < 200) {\n    //         return this.mainLayer;\n    //     } else if (type >= 200 && type < 500) {\n    //         return this.commonLayer;\n    //     } else if (type >= 500 && type < 600) {\n    //         return this.popLayer;\n    //     } else if (type >= 600 && type < 700) {\n    //         return this.messageLayer;\n    //     } else if (type >= 700 && type < 800) {\n    //         return this.storyLayer;\n    //     } else if (type >= 800 && type < 900) {\n    //         return this.tipLayer;\n    //     } else if (type >= 900 && type < 1000) {\n    //         return this.gmLayer;\n    //     } else if (type >= 1000) {\n    //         return this.topLayer;\n    //     }\n    // }\n}\n\n\n\n\n","\nimport MainLayer from \"../ui/mainLayer\"\n\nexport default class GameManager {\n    role3D: Laya.Sprite3D;\n\n    camCube: Laya.Sprite3D;\n\n    public baseLayer: MainLayer = new MainLayer();\n\n    constructor() {\n        this.baseLayer.initContainer(Laya.stage);\n    }\n\n    private static _instance: GameManager;\n    public sceneData: SceneData = new SceneData();\n\n    public static get Instance(): GameManager {\n        if (!this._instance) {\n            this._instance = new GameManager();\n        }\n        return this._instance;\n    }\n}\nclass SceneData {\n    constructor() {\n    }\n\n    public autoMoveDir: number = 9999;\n}","import GameManager from \"../script/GameManager\";\nexport { JoyBoxUI, VirtualJoyUI, VirtualJoy }\n\n\nclass JoyBoxUI extends Laya.View {\n    public txtRoleName: Laya.Label;\n    public joyUI: VirtualJoyUI;\n    public static uiView: any = {\n        \"type\": \"View\",\n        \"props\": {\n            \"width\": 1600,\n            \"height\": 1400\n        },\n        \"child\": [{\n            \"type\": \"Label\",\n            \"props\": {\n                \"y\": 13,\n                \"x\": 256,\n                \"var\": \"txtRoleName\",\n                \"text\": \"主界面\"\n            }\n        }\n\n        // 是动态加的\n        // , {\n        //     \"type\": \"VirtualJoy\",\n        //     \"props\": {\n        //         \"y\": 0,\n        //         \"x\": 400,\n        //         \"var\": \"joyUI\",\n        //         \"runtime\": \"VirtualJoyUI\"\n        //     }\n        // }\n\n        ]\n    };\n    constructor() {\n        super()\n    }\n    createChildren(): void {\n        Laya.View.regComponent(\"VirtualJoyUI\", VirtualJoyUI);\n\n        super.createChildren();\n        this.createView(JoyBoxUI.uiView);\n\n    }\n}\n\n\nclass VirtualJoyUI extends Laya.View {\n    public virtual: Laya.Image;\n    public ball: Laya.Image;\n\n    public static uiView: any = {\n        \"type\": \"View\",\n        \"props\": {},\n        \"child\": [{\n            \"type\": \"Image\",\n            \"props\": {\n                \"y\": 0,\n                \"x\": 0,\n                \"var\": \"virtual\",\n                \"skin\": \"skin/home/circle.png\"\n            }\n        }, {\n            \"type\": \"Image\",\n            \"props\": {\n                \"y\": 25,\n                \"x\": 25,\n                \"var\": \"ball\",\n                \"skin\": \"skin/home/ball.png\"\n            }\n        }]\n    };\n    constructor() { super() }\n    createChildren(): void {\n\n        super.createChildren();\n        this.createView(VirtualJoyUI.uiView);\n\n    }\n\n}\n\nclass VirtualJoy {\n\n    private circleRadius: number = 0;\n    private ballRadius: number = 0;\n    private centerX: number = 0;\n    private centerY: number = 0;\n    private touchID: number;\n    private p1: Laya.Point = new Laya.Point();\n    private startMove: boolean = false;\n    private _start: boolean = false;\n    private _skin: VirtualJoyUI;\n\n    constructor(skin: VirtualJoyUI) {\n        this._skin = skin;\n        this.circleRadius = 60.5; //图片大小是 121\n        this.ballRadius = 35;\n        this.centerX = this.circleRadius;\n        this.centerY = this.circleRadius;\n        this._skin.pivotX = this.circleRadius;\n        this._skin.pivotY = this.circleRadius;\n        this._skin.ball.pivotX = this.ballRadius;\n        this._skin.ball.pivotY = this.ballRadius;\n        this._skin.ball.x = this.centerX;\n        this._skin.ball.y = this.centerY;\n        this.p1.x = this._skin.x;\n        this.p1.y = this._skin.y;\n        this._skin.visible = false;\n        this._skin.mouseEnabled = false;\n        this._skin.mouseThrough = true;\n        this.start();\n    }\n\n    public start() {\n        if (this._start)\n            return;\n        if (this._skin.parent == null) {\n            let container: Laya.Sprite = GameManager.Instance.baseLayer.mainLayer;\n            container.addChild(this._skin);\n        }\n        this._skin.visible = false;\n\n        let root: Laya.Sprite = Laya.stage;\n        root.on(Laya.Event.MOUSE_DOWN, this, this.onTouchBegin);\n        this._start = true;\n\n    }\n    public stop() {\n        this._start = false;\n        this.clearMove();\n        let root: Laya.Sprite = Laya.stage;\n        root.off(Laya.Event.MOUSE_DOWN, this, this.onTouchBegin);\n    }\n\n\n    private onTouchBegin(e: Laya.Event): void {\n        // if(!(e.target instanceof egret.Stage)) return;\n        if (!this._skin) {\n            return;\n        }\n        // this._skin.x this._skin.y 对应中心位置\n        //因为有设置pivot 轴心点的位置是处于图片的center center\n        this._skin.x = e.stageX;\n        this._skin.y = e.stageY;\n\n        if (this._skin.parent == null) {\n            let container: Laya.Sprite = GameManager.Instance.baseLayer.mainLayer;\n            container.addChild(this._skin);\n\n        }\n        this._skin.visible = true;\n        this._skin.ball.x = this.centerX;\n        this._skin.ball.y = this.centerY;\n        this.p1.x = this._skin.x;\n        this.p1.y = this._skin.y;\n\n        let root: Laya.Sprite = Laya.stage;\n\n\n        // 鼠标左键\n        root.off(Laya.Event.MOUSE_DOWN, this, this.onTouchBegin);\n        root.on(Laya.Event.MOUSE_UP, this, this.onTouchEnd);\n        root.on(Laya.Event.MOUSE_MOVE, this, this.onTouchMove);\n\n        // this._skin.visible = false;\n\n    }\n\n    private onTouchEnd(e: Laya.Event): void {\n        // if(this.touchID != e.touchPointID){\n        // \treturn;\n        // }\n        let root: Laya.Sprite = Laya.stage;\n\n        root.on(Laya.Event.MOUSE_DOWN, this, this.onTouchBegin);\n        this._skin.ball.x = this.centerX; // ball 这个相对位置是父容器的左上角\n        this._skin.ball.y = this.centerY;\n        this.clearMove();\n    }\n    private onTouchMove(e: Laya.Event): void {\n        // if(this.touchID != e.touchPointID){\n        // \treturn;\n        // }\n\n        e.stopPropagation();\n        if (!this._skin) {\n            return;\n        }\n        let p2: Laya.Point = new Laya.Point(e.stageX, e.stageY);\n\n        // Math.atan2()函数返回点(x,y)和原点(0,0)之间直线的倾斜角，弧度值\n        // 表示斜线和 x=x 这条线(垂直方向的)的夹角\n\n        // 弧度 = (π × 角度) / 180\n        // 角度 = (180×弧度) / π\n        let angle: number = Math.atan2(p2.y - this.p1.y, p2.x - this.p1.x);\n\n        // JOY Stick 的偏移\n        let dist = Math.sqrt((this.p1.x - p2.x) * (this.p1.x - p2.x) + (this.p1.y - p2.y) * (this.p1.y - p2.y));\n        let bx: number, by: number; //ball 相对于父容器左上角的偏移\n\n        // 拖动距离在圆圈内的时候\n        if (dist <= (this.circleRadius - this.ballRadius)) {\n            this._skin.ball.x = bx = this.centerX + p2.x - this._skin.x; //似乎用 this.p1也可以\n            this._skin.ball.y = by = this.centerY + p2.y - this._skin.y;\n        } else {\n            this._skin.ball.x = bx = Math.cos(angle) * (this.circleRadius - this.ballRadius) + this.centerX;\n            this._skin.ball.y = by = Math.sin(angle) * (this.circleRadius - this.ballRadius) + this.centerY;\n            this._skin.visible = true;\n\n        }\n        if (this._skin.visible == false) {\n            return;\n\n        }\n        // let cellw:number = GameDefine.MAP_GRID_WIDTH;\n        // let cellh:number = GameDefine.MAP_GRID_HEIGHT;\n\n        // let dir = DirectionUtil.getDir( Math.floor(p2.x/cellw)-Math.floor(this.p1.x/cellw),Math.floor(p2.y/cellh)- Math.floor(this.p1.y/cellh));\n        //\tTestGB.Instance.moveByVirtual(dir);\n        let dir: number = this.orientation(bx, by, this.centerX, this.centerY);\n        this.moveByVirtual(dir);\n        //console.log(dir+'playRun移动方向');\n\n\n    }\n\n\n//atan2(x, y)\n//               +\n//               |\n//               |\n//               |\n//               |\n//   -1 * (right)|   0 ~ 90\n//               |\n//               |\n// +--------------------------+\n//               |\n//               |\n//               |\n//   -1 * (right)|   180 - up\n//               |\n//               |\n//               |\n//               |\n//               +\n\n\n    public orientation(ballx: number, bally: number, centerx: number, centery: number): number {\n        var dx: number = ballx - centerx ;\n        var dy: number = -(bally - centery) ;\n\n        // 这里的计算应该以 centerx centery 为圆心\n        // 注意2D世界中的坐标系是左上角 0,0   越往下y越大\n        // console.log(\"dx  dy\", dx, dy)\n        var r: number = Math.atan2(dx, dy) * 180 / Math.PI;  //根据弧度计算角度\n        return r;\n    }\n    private clearMove(): void {\n        //\tTestGB.Instance.moveByVirtual(-1);\n        this.moveByVirtual(9999);\n        if (this._skin.parent) {\n            this._skin.parent.removeChild(this._skin);\n        }\n        let root: Laya.Sprite = Laya.stage;\n\n        root.off(Laya.Event.MOUSE_UP, this, this.onTouchEnd);\n        root.off(Laya.Event.MOUSE_MOVE, this, this.onTouchMove);\n    }\n\n    public moveByVirtual(value: number): void {\n        if (GameManager.Instance.sceneData.autoMoveDir != value) {\n            // DataManager.Instance.sceneData.sendNotification(constants.E_DATA_NOTIFY_UIVIEW.VIRTUAL_MOVE,value);\n            GameManager.Instance.sceneData.autoMoveDir = value;\n        }\n\n    }\n\n}","import Collision = Laya.Collision;\nimport ColliderShape = laya.d3.physics.shape.ColliderShape;\nimport GameManager from \"./GameManager\"\nimport Vector3 = Laya.Vector3;\nexport default class RoleMoveScript extends Laya.Script3D {\n    protected player: Laya.Sprite3D;\n    protected playerAnimator: Laya.Animator\n    protected playerCollider: Laya.PhysicsCollider\n\n\n\n    protected lastPos: Laya.Vector3\n\n    constructor() {\n        super();\n    }\n    /**\n     * @inheritDoc\n     */\n    public onAwake(): void {\n        this.player = this.owner as Laya.Sprite3D;\n        if (this.player) {\n            this.playerAnimator = this.player.getComponent(Laya.Animator)\n\n            //https://ldc2.layabox.com/doc/?language=zh&nav=zh-ts-4-16-5\n            //插件目前暂不支持角色碰撞器导出，使用时需要使用代码创建。\n            //然后导出后的player的 components 下面确实没有 capsuleCollider  只有rigidbody 和 js 还有就是 animator\n            //this.playerCollider = this.player.getComponent(Laya.PhysicsCollider)\n            //摩擦力\n            // this.playerCollider.friction = 2;\n            //物理碰撞体设置弹力\n            // this.playerCollider.restitution = 0.3;\n\n\n            var character: Laya.CharacterController = this.player.addComponent(Laya.CharacterController);\n            var capsuleShape: Laya.CapsuleColliderShape = new Laya.CapsuleColliderShape(0.2516022, 1.598118, 1);\n            //这里最后1 代表方向 static SHAPEORIENTATION_UPY: number = 1;\n            capsuleShape.localOffset = new Laya.Vector3(0.0152, 0.7938, 0);\n            character.colliderShape = capsuleShape;\n            // 以上这段character 相关的代码  是控制人物能够站立在地面上\n\n\n            let transform: Laya.Transform3D = this.player.transform;\n            let playerPosition: Vector3 = transform.position;\n            this.lastPos = playerPosition;\n\n\n            const lookAtPoint1 = new Laya.Vector3(playerPosition\n                .x  + 9.489044, transform.position.y, playerPosition.z - 4.87) //仙人掌\n            const lookAtPoint2 = new Laya.Vector3(playerPosition.x + 19.35, 10.12411, playerPosition.z - 11.91) //岩石\n            const lookAtPoint3 = new Laya.Vector3(274.0090026855469, transform.position.y, 34.65625)// KyleRobot\n\n            const lookAtPoint31 = new Laya.Vector3(272.6490173339844, transform.position.y, 34.65625)// KyleRobot\n            const lookAtPoint32 = new Laya.Vector3(271.239013671875, transform.position.y, 34.65625)// KyleRobot\n\n            const lookAtPoint4 = new Laya.Vector3(playerPosition.x + 19.1, transform.position.y, playerPosition.z - 20.23) //Roboto\n            let rotation: Laya.Quaternion = new Laya.Quaternion();\n            setTimeout(() => {\n                // this.player.transform.rotate(new Vector3(0, 180, 0), true, false)\n\n\n                //不能正确指向目标\n                // Laya.Quaternion.lookAt(transform.position, lookAtPoint32, new Laya.Vector3(0, 1, 0), rotation);\n                // this.player.transform.localRotation = rotation;\n\n                this.player.transform.lookAt(lookAtPoint32, new Laya.Vector3(0, 1, 0), false);\n                let forward = new Vector3()\n                this.player.transform.getForward(forward)\n                console.log(\"for ward\", forward)\n\n                // this.player.transform.rotate(new Vector3(0, 180, 0), false, false);//中心对称取反一下\n                console.log(\"pos\", this.player.transform.position)\n                let newPos = new Vector3();\n                Vector3.add(transform.position, new Vector3(0.5 , 0, 0.5), newPos)\n                this.player.transform.position = newPos\n                this.lastPos = newPos\n                console.log(\"pos\", this.player.transform.position)\n            }, 1500)\n\n\n        }\n    }\n\n    /**\n     * @inheritDoc\n     */\n    public onUpdate(): void {\n        if (GameManager.Instance.sceneData.autoMoveDir != 9999) {\n\n            let transform: Laya.Transform3D = this.player.transform;\n            this.player.transform.position = this.lastPos;\n            // console.log(\"new pos  1\", transform.position.x - this.lastPos.x)\n            // console.log(\"autoMoveDir\", GameManager.Instance.sceneData.autoMoveDir)\n\n            // 弧度 = (π × 角度) / 180\n            // 角度 = (180×弧度) / π\n            // 弧度 - π  相当于角度 - 180\n            // 注意 Math.cos(90 * Math.PI/180) 存在精度问题  结果是6.123031769111886e-17\n\n\n            let rotateAngle: number = GameManager.Instance.sceneData.autoMoveDir * Math.PI / 180;\n            let sz: number = Math.sin(rotateAngle); //\n            let sx: number = Math.cos(rotateAngle); //\n\n            //sinα=cos（π/2-α），cosα=sin（π/2-α），\n            //sin(x+π) = -sin(x)\n            let szl: number = Math.sin(rotateAngle - Math.PI); //这是demo 中做法...取反(- Math.PI) 原因在方法2 中有说明\n            let sxl: number = -Math.cos(rotateAngle - Math.PI);\n            // posx = sxl + transform.position.x;\n            // posz = szl + transform.position.z;\n            // 效果一样\n\n            // console.log(\"sz  sx\", sx/sz,  sxl/szl, sz, sx)\n            // console.log(sz, sx)\n\n\n            // 调整了摄像头的方位 默认看到的是这样的  z 和 unity 中的z 一致 但x 相反\n            // x\n            // ^\n            // |\n            // |\n            // |\n            // |\n            // |\n            // +------------> z\n\n            // 由于人物是用z的负方向去指向lookat物体\n            // 所以角度这里要有180的调整\n\n\n            let posx = sx + transform.position.x;\n            let posz = -sz + transform.position.z; //取反的原因下面有说明\n            let posy = 0 + transform.position.y;\n\n            let rotation: Laya.Quaternion = new Laya.Quaternion();\n\n            // 关于lookat\n            // 就是看向目标  让物体Z轴指向目标。(这是Unity)\n            // https://zhuanlan.zhihu.com/p/80490378\n            // https://blog.csdn.net/qq_34568700/article/details/95772668\n            // 而Laya 使用不同的坐标系\n            // 存在偏差(坐标系不同?)  当JOY 顺时针旋转的时候  人物在逆时针旋转\n\n\n            let lookAtPoint = new Vector3(posx, transform.position.y, posz);\n\n            // 方法1  直接用人物本身的lookat\n            // 最后人物旋转180的原因是  似乎laya 中是使用z的负方向去lookat的\n            // this.player.transform.lookAt(lookAtPoint, new Laya.Vector3(0, 1, 0), false);\n            // console.log(\"local rotation 1\", sz, sx, lookAtPoint, this.player.transform.localRotation);\n            // this.player.transform.rotate(new Vector3(0, 180, 0), false, false);//中心对称取反一下\n            // 但是update 函数中却不能这么操作  不然人物闪动 在不断的变化方向\n\n\n            // 方法2 用全局lookat 得到 rotate\n            // 存在一个问题 角度上是x轴对称的\n            // 比如实际上看 1 1 的位置时候  人物实际上朝向的是 (-1 1)\n            // 当看 1 -1 时  人物实际上看的是 -1 -1\n            Laya.Quaternion.lookAt(transform.position, lookAtPoint, new Laya.Vector3(0, 1, 0), rotation);\n            this.player.transform.localRotation = rotation;\n            // console.log(\"new pos  2\", this.player.transform.position.x - this.lastPos.x)\n            // console.log(\"local rotation 2\", sz, sx, lookAtPoint, this.player.transform.localRotation);\n\n            // 方法3 rotate //不行 这样会一直转下去\n            // this.player.transform.rotate(new Vector3(0, rotateAngle, 0), false, false)\n\n\n\n\n\n            // 注释掉这个就可以原地不动\n            // 这里的 vec3 和似乎和运动方向没关系  和速度也没有关系  不懂\n            // (this.owner as Laya.Sprite3D).transform.translate(new Laya.Vector3(1/600, 0, -1/600), true);\n            let newPos = new Vector3();\n            Vector3.add(transform.position, new Vector3(sx/10, 0, sz/10) ,newPos)\n            // console.log(\"new pos  3\", newPos.x - this.lastPos.x)\n            // this.player.transform.position = newPos\n            this.player.transform.translate(new Vector3(sx / 10, 0, sz / 10), true)\n            this.lastPos = newPos\n\n\n\n            this.playerAnimator.play(\"Run\")\n        } else {\n            if (this.playerAnimator) {\n                this.playerAnimator.play(\"Idle\")\n\n            }\n        }\n\n        //如果动画名字弄错的话 会有  Cannot read property '_clip' of undefined 的报错\n    }\n\n    public onCollisionEnter(collision: Collision): void {\n        // console.log(\"player collision\", collision)\n    }\n}\n\n// 另外有个帖子也说道了朝向这个问题\n// https://ask.layabox.com/question/38719","import GameManager from \"../GameManager\"\nimport Vector3 = Laya.Vector3;\n\nexport default class CameraFollowScript extends Laya.Script3D {\n\n    /** @private */\n    protected _tempVector3: Laya.Vector3 = new Laya.Vector3();\n    protected lastMouseX: number;\n    protected lastMouseY: number;\n    protected lastRoleTransform: Laya.Vector3;\n    protected yawPitchRoll: Laya.Vector3 = new Laya.Vector3();\n    protected resultRotation: Laya.Quaternion = new Laya.Quaternion();\n    protected tempRotationZ: Laya.Quaternion = new Laya.Quaternion();\n    protected tempRotationX: Laya.Quaternion = new Laya.Quaternion();\n    protected tempRotationY: Laya.Quaternion = new Laya.Quaternion();\n    protected isRightMouseDown: Boolean;\n    protected isLeftMouseDown: Boolean;\n    protected rotaionSpeed: number = 0.00006;\n    protected camera: Laya.BaseCamera;\n    protected scene: Laya.Scene3D;\n    protected role3D: Laya.Sprite3D;\n    protected camCube: Laya.Sprite3D;\n\n    constructor() {\n        super();\n\n    }\n\n    /**\n     * @private\n     */\n    protected _updateRotation(): void {\n        if (Math.abs(this.yawPitchRoll.y) < 1.50) {\n\n            // 欧拉角生成四元数\n            // https://en.wikipedia.org/wiki/Aircraft_principal_axes 偏航軸\n            // Yew:y   Roll:z  Pitch:x\n            Laya.Quaternion.createFromYawPitchRoll(this.yawPitchRoll.x, this.yawPitchRoll.y, this.yawPitchRoll.z, this.tempRotationZ);\n            // console.log(\"rotation   1\", this.camera.transform.localRotation)\n            this.tempRotationZ.cloneTo(this.camera.transform.localRotation);\n            // console.log(\"rotation   2\", this.camera.transform.localRotation)\n\n            // 不懂要这一步做啥...不是已经clone了么...\n            this.camera.transform.localRotation = this.camera.transform.localRotation;\n\n\n            // console.log(\"rotation   3\", this.camera.transform.localRotation)\n            let forward = new Vector3()\n            this.camera.transform.getForward(forward)\n\n            let scaleFactor = 10;\n            let cubeDistance = new Vector3(forward.x * scaleFactor, 3, forward.y * scaleFactor)\n            let cuePos = new Vector3()\n            Vector3.add(this.camera.transform.position, cubeDistance, cuePos)\n\n            this.camCube.transform.position = cuePos\n            console.log(\"forward\", forward, cuePos)\n        }\n    }\n\n    /**\n     * @inheritDoc\n     */\n    public onAwake(): void {\n        Laya.stage.on(Laya.Event.RIGHT_MOUSE_DOWN, this, this.rightMouseDown);\n        Laya.stage.on(Laya.Event.RIGHT_MOUSE_UP, this, this.rightMouseUp);\n        Laya.stage.on(Laya.Event.MOUSE_DOWN, this, this.leftMouseDown);\n        Laya.stage.on(Laya.Event.MOUSE_UP, this, this.leftMouseUp);\n        Laya.stage.on(Laya.Event.MOUSE_OUT, this, this.mouseOut);\n        this.camera = this.owner as Laya.Camera;\n        this.role3D = GameManager.Instance.role3D;\n        this.lastRoleTransform = this.role3D.transform.position;\n\n        this.camCube = GameManager.Instance.camCube;\n\n    }\n\n    /**\n     * @inheritDoc\n     */\n    public onUpdate(): void {\n        var elapsedTime: number = Laya.timer.delta;\n        let role3D = this.role3D;\n        if (!isNaN(this.lastMouseX) && !isNaN(this.lastMouseY) && this.isRightMouseDown) {\n            var scene: Laya.Scene3D = this.owner.scene;\n            Laya.KeyBoardManager.hasKeyDown(87) && this.moveForward(-0.01 * elapsedTime);//W\n            Laya.KeyBoardManager.hasKeyDown(83) && this.moveForward(0.01 * elapsedTime);//S\n            Laya.KeyBoardManager.hasKeyDown(65) && this.moveRight(-0.01 * elapsedTime);//A\n            Laya.KeyBoardManager.hasKeyDown(68) && this.moveRight(0.01 * elapsedTime);//D\n            Laya.KeyBoardManager.hasKeyDown(81) && this.moveVertical(0.01 * elapsedTime);//Q\n            Laya.KeyBoardManager.hasKeyDown(69) && this.moveVertical(-0.01 * elapsedTime);//E\n\n            var offsetX: number = Laya.stage.mouseX - this.lastMouseX;\n            var offsetY: number = Laya.stage.mouseY - this.lastMouseY;\n            var yprElem: Laya.Vector3 = this.yawPitchRoll;\n            yprElem.x -= offsetX * this.rotaionSpeed * elapsedTime;\n            yprElem.y -= offsetY * this.rotaionSpeed * elapsedTime;\n            // console.log(\"offset \", offsetX, offsetY, yprElem.x, yprElem.y)\n            this._updateRotation();\n\n\n\n        } else {\n            // if (this.isLeftMouseDown) {\n            let roleMoveVec = new Vector3(\n                role3D.transform.position.x - this.lastRoleTransform.x,\n                role3D.transform.position.y - this.lastRoleTransform.y,\n                role3D.transform.position.z - this.lastRoleTransform.z,\n            )\n            this.camera.transform.position = new Vector3(\n                this.camera.transform.position.x + roleMoveVec.x,\n                this.camera.transform.position.y + roleMoveVec.y,\n                this.camera.transform.position.z + roleMoveVec.z,\n            )\n            //lookAt(role3D.transform.position, new Laya.Vector3(0,1,0));\n        }\n\n        this.lastMouseX = Laya.stage.mouseX;\n        this.lastMouseY = Laya.stage.mouseY;\n        this.lastRoleTransform = new Vector3(role3D.transform.position.x, role3D.transform.position.y, role3D.transform.position.z);\n\n    }\n\n    /**\n     * @inheritDoc\n     */\n    public onDestroy(): void {\n        Laya.stage.off(Laya.Event.RIGHT_MOUSE_DOWN, this, this.rightMouseDown);\n        Laya.stage.off(Laya.Event.RIGHT_MOUSE_UP, this, this.rightMouseUp);\n    }\n\n    protected rightMouseDown(e: Laya.Event): void {\n\n        // 根据四元数得到欧拉角\n        this.camera.transform.localRotation.getYawPitchRoll(this.yawPitchRoll);\n        //如果e 是 Event 则应该这样获取到在stage上的位置 Laya.stage.mouseX;\n        this.lastMouseX = e.stageX\n        this.lastMouseY = e.stageY\n        this.isRightMouseDown = true;\n    }\n\n    protected rightMouseUp(e: Event): void {\n        this.isRightMouseDown = false;\n    }\n\n    protected leftMouseDown(e: Event): void {\n        console.log(\"left\")\n        // this.camera.transform.localRotation.getYawPitchRoll(this.yawPitchRoll);\n\n        // this.lastMouseX = Laya.stage.mouseX;\n        // this.lastMouseY = Laya.stage.mouseY;\n        this.isLeftMouseDown = true;\n    }\n\n    protected leftMouseUp(e: Event): void {\n        this.isLeftMouseDown = false;\n    }\n\n    protected mouseOut(e: Event): void {\n        this.isRightMouseDown = false;\n        this.isLeftMouseDown = false;\n    }\n\n    /**\n     * 向前移动。\n     * @param distance 移动距离。\n     */\n    public moveForward(distance: number): void {\n        this._tempVector3.x = this._tempVector3.y = 0;\n        this._tempVector3.z = distance;\n        this.camera.transform.translate(this._tempVector3);\n    }\n\n    /**\n     * 向右移动。\n     * @param distance 移动距离。\n     */\n    public moveRight(distance: number): void {\n        this._tempVector3.y = this._tempVector3.z = 0;\n        this._tempVector3.x = distance;\n        this.camera.transform.translate(this._tempVector3);\n    }\n\n    /**\n     * 向上移动。\n     * @param distance 移动距离。\n     */\n    public moveVertical(distance: number): void {\n        this._tempVector3.x = this._tempVector3.z = 0;\n        this._tempVector3.y = distance;\n        this.camera.transform.translate(this._tempVector3, false);\n    }\n}\n","export default class GlobalConfig {\n    static scenePathMap: { [key: string]: string } = {\n        \"entry\": \"scene/GameScene.scene\", //似乎后缀也可以是json  后缀是可以设置的\n        // 如果使用预设  导出的是 lh 后缀\n        // 要使用场景  导出的才是 ls 文件\n        \"game\": \"res/LayaScene_DesertScene_mobile/Conventional/DesertScene_mobile.ls\"\n\n\n    };\n}\n\nwindow[\"GlobalConfig\"] = GlobalConfig;","import GlobalConfig from \"../GlobalConfig\";\n\n\nexport default class SceneManager {\n\n    private static _instance: SceneManager;\n\n    public static get instance(): SceneManager {\n        !this._instance && (this._instance = new SceneManager);\n        return this._instance;\n    }\n\n    private _scene: Laya.Scene3D;\n    initialize() {\n\n    }\n    \n    loadScene(sceneName: string): Promise<any> {\n        let path = GlobalConfig.scenePathMap[sceneName]\n        return new Promise((resolve, reject) => {\n            \n            if (!path) {\n                reject(\"no scene \" +  sceneName)\n            }\n            if (path.endsWith(\"ls\")) {\n                Laya.Scene3D.load(path, Laya.Handler.create(this, resolve));            \n            }else{\n                Laya.Scene.load(path, Laya.Handler.create(this, resolve));\n            }\n        })\n    }\n\n    toScene(sceneName: string, closeOthers? : boolean): void {\n        let path = GlobalConfig.scenePathMap[sceneName]\n        if (path.endsWith(\"ls\")) {\n            Laya.Scene.open(path)\n        } else {\n            Laya.Scene.open(path);\n        }        \n    }\n\n\n    public get currentScene(): Laya.Scene3D {\n        if (this._scene) {\n            return this._scene;\n        }\n        \n    }\n\n    public getObjectByName(name: string): Laya.Sprite3D {\n        return (this._scene.getChildByName(name) as Laya.Sprite3D);\n    }\n\n    public addChild(node: Laya.Sprite3D): Laya.Sprite3D {\n        return this._scene.addChild(node) as Laya.Sprite3D;\n    }\n}\n\n","\n\n\nimport Mesh = Laya.Mesh;\nimport { customTerrianShader } from \"./customMaterial/customShader\"\nimport { createTerrainMaterial } from \"./customMaterial/createMyMaterial\"\nimport { JoyBoxUI, VirtualJoyUI, VirtualJoy } from \"../ui/joy\"\nimport RoleMoveScript from \"./RoleMoveScript\"\nimport CameraMoveScript from \"./common/CameraMoveScript\"\nimport CameraFollowScript from \"./common/CameraFollowScript\"\nimport SceneManager from \"./SceneManager\"\nimport GameManager from \"./GameManager\"\n\nexport default  class GameScene extends Laya.Scene3D {\n    private _scene: Laya.Scene3D;\n    private _camera: Laya.Camera;\n    constructor() {\n        super();\n\n        this._scene = null;\n        this._camera = null;\n        SceneManager.instance.loadScene(\"game\").then((scene) => {\n            this.initShader();\n            this._scene = scene;\n            // scene.zOrder = -10\n            Laya.stage.addChild(scene);\n            // 使用Unity 中导出的相机\n            let camera: Laya.Camera = this._camera = scene.getChildByName(\"Main Camera\") as Laya.Camera;\n            //相机视角控制组件(脚本),\n            // camera.addComponent(CameraMoveScript);\n            this._scene.addChild(camera);  // camera 也有scene 属\n            let camCube = scene.getChildByName(\"Cube\") as Laya.Sprite3D;\n            this._scene.addChild(camCube)\n            GameManager.Instance.camCube = camCube;\n\n\n\n            // 调整了摄像头的方位 目前看到的是这样的\n            // x\n            // ^\n            // |\n            // |\n            // |\n            // |\n            // |\n            // +------------> z\n\n\n\n\n\n\n            // 使用Unity 中的光照\n\n            let dLight: Laya.DirectionLight = scene.getChildByName(\"Directional Light\") as Laya.DirectionLight;\n            this._scene.addChild(dLight);\n            let desert: Laya.Sprite3D = scene.getChildByName(\"DesertScene\") as Laya.Sprite3D\n            this.loadTerrain(desert)\n            this.morePlants(desert)\n            this.playerControl(desert)\n        })\n\n        // Laya.Scene3D.load(\"res/LayaScene_DesertScene_mobile/Conventional/DesertScene_mobile.ls\", Laya.Handler.create(this,  (scene)=> {\n        // this.addToScene0()\n        // this._scene = scene;\n        // Laya.stage.addChild(scene);\n\n        // this.addToSceneFromUnity(scene)\n        // }))\n    }\n    initShader() {\n        customTerrianShader()\n    }\n\n\n    loadTerrain(desert: Laya.Sprite3D) {\n\n        // 获取terrain // terrain 在console 中显示的类型就是 MeshSprite3D\n        var terrain: Laya.MeshSprite3D = desert.getChildByName(\"Terrain\") as Laya.MeshSprite3D\n\n\n        Mesh.load(\"res/LayaScene_DesertScene_mobile/Conventional/terrain/terrain_Terrain.lm\", Laya.Handler.create(this, function (mesh: Mesh): void {\n            terrain.meshRenderer.sharedMaterial = createTerrainMaterial();\n        }))\n\n        //平面添加物理碰撞体组件\n        var planeStaticCollider: Laya.PhysicsCollider = terrain.addComponent(Laya.PhysicsCollider);\n        //创建盒子形状碰撞器\n        var planeShape: Laya.BoxColliderShape = new Laya.BoxColliderShape(10, 0, 10);\n        //物理碰撞体设置形状\n        planeStaticCollider.colliderShape = planeShape;\n        //物理碰撞体设置摩擦力\n        planeStaticCollider.friction = 2;\n        //物理碰撞体设置弹力\n        planeStaticCollider.restitution = 0.3;\n\n\n        let rock = desert.getChildByName(\"Rocks\").getChildByName(\"rock07_m\") as Laya.Sprite3D\n        console.log(\"rock\", rock.transform.position)\n        let kyle = desert.getChildByName(\"RobotKyle\") as Laya.Sprite3D\n        console.log(\"kyle\", kyle.transform.position)\n        let kyle1 = desert.getChildByName(\"RobotKyle (1)\") as Laya.Sprite3D\n        // console.log(\"kyle1\", kyle1.transform.position)\n        let kyle2 = desert.getChildByName(\"RobotKyle (2)\") as Laya.Sprite3D\n        // console.log(\"kyle2\", kyle2.transform.position)\n        let roboto = desert.getChildByName(\"Roboto\") as Laya.Sprite3D\n        // console.log(\"roboto\", roboto.transform.position)\n\n    }\n\n    morePlants(desert: Laya.Sprite3D) {\n        let plants: Laya.Sprite3D = desert.getChildByName(\"Plants\") as Laya.Sprite3D\n        let catcus03Outer: Laya.Sprite3D = desert.getChildByName(\"Plants\").getChildByName(\"cactus03_m\") as Laya.Sprite3D\n        let oneCatcus03: Laya.Sprite3D = catcus03Outer.getChildByName(\"default\") as Laya.Sprite3D\n        let onePos = oneCatcus03.transform.position\n        // 这里只能指定世界坐标\n        let copy1 = Laya.Sprite3D.instantiate(oneCatcus03, catcus03Outer, false, new Laya.Vector3(1 + onePos.x, onePos.y, -1 + onePos.z));\n        // console.log(\"oneCatcus03\", oneCatcus03.transform.position, oneCatcus03.transform.localPosition)\n        // console.log(\"copy1      \", copy1.transform.position, copy1.transform.localPosition)\n        // console.log(\"catcus03\", catcus03)\n\n    }\n\n    playerControl(desert: Laya.Sprite3D) {\n        let player: Laya.Sprite3D = desert.getChildByName(\"unitychan\") as Laya.Sprite3D\n        GameManager.Instance.role3D = player;\n        console.log(\"player\", player.transform.position)\n\n        Laya.stage.addChild(new JoyBoxUI());\n        new VirtualJoy(new VirtualJoyUI());\n\n\n        this._camera.addComponent(CameraFollowScript);\n        player.addComponent(RoleMoveScript)\n\n\n    }\n\n}","import GameConfig from \"./GameConfig\"; // 页面长宽高 // start Scene\r\nimport GlobalConfig from \"./GlobalConfig\"\r\nimport SceneManager from \"./script/SceneManager\";\r\nimport GameScene from \"./script/GameScene\"\r\n\r\nclass Main {\r\n\tconstructor() {\r\n\t\t//根据IDE设置初始化引擎\r\n\t\tif (window[\"Laya3D\"]) Laya3D.init(GameConfig.width, GameConfig.height);\r\n\t\telse Laya.init(GameConfig.width, GameConfig.height, Laya[\"WebGL\"]);\r\n\t\tLaya[\"Physics\"] && Laya[\"Physics\"].enable();\r\n\t\tLaya[\"DebugPanel\"] && Laya[\"DebugPanel\"].enable();\r\n\t\tLaya.stage.scaleMode = GameConfig.scaleMode;\r\n\t\tLaya.stage.screenMode = GameConfig.screenMode;\r\n\t\tLaya.stage.alignV = GameConfig.alignV;\r\n\t\tLaya.stage.alignH = GameConfig.alignH;\r\n\t\t//兼容微信不支持加载scene后缀场景\r\n\t\tLaya.URL.exportSceneToJson = GameConfig.exportSceneToJson;\r\n\r\n\t\t//打开调试面板（通过IDE设置调试模式，或者url地址增加debug=true参数，均可打开调试面板）\r\n\t\t// if (GameConfig.debug || Laya.Utils.getQueryString(\"debug\") == \"true\") Laya.enableDebugPanel();\r\n\t\t// if (GameConfig.physicsDebug && Laya[\"PhysicsDebugDraw\"]) Laya[\"PhysicsDebugDraw\"].enable();\r\n\t\t// if (GameConfig.stat)\r\n\t\tLaya.enableDebugPanel();\r\n\t\t// Laya.Stat.show();\r\n\t\tLaya.alertGlobalError = true;\r\n\r\n\t\t//激活资源版本控制，version.json由IDE发布功能自动生成，如果没有也不影响后续流程\r\n\t\tLaya.ResourceVersion.enable(\"version.json\", Laya.Handler.create(this, this.onVersionLoaded), Laya.ResourceVersion.FILENAME_VERSION);\r\n\t}\r\n\r\n\tonVersionLoaded(): void {\r\n\t\t//激活大小图映射，加载小图的时候，如果发现小图在大图合集里面，则优先加载大图合集，而不是小图\r\n\t\tLaya.AtlasInfoManager.enable(\"fileconfig.json\", Laya.Handler.create(this, this.onConfigLoaded));\r\n\t}\r\n\r\n\tonConfigLoaded(): void {\r\n\t\t//加载IDE指定的场景\r\n\t\t// 下面加载的场景是 gameScene\r\n\t\t// 这个场景绑定的ts 是GameUI\r\n\t\t// 调用这个语句之后 GameUI 的 constructor 才会执行\r\n\t\t// GameConfig.startScene && Laya.Scene.open(GameConfig.startScene);\r\n\r\n\t\tnew GameScene()\r\n\r\n\t}\r\n}\r\n//激活启动类\r\nnew Main();\r\n\r\n// layaMaxUI ---> GameUI ---> GameConfig ----> Main"],"names":["Shader3D","Vector3"],"mappings":"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"}